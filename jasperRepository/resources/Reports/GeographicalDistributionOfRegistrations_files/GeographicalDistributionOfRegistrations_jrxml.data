<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="GeographicalDistributionOfRegistrations" language="groovy" pageWidth="612" pageHeight="792" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="5c62c8fc-6025-423e-8313-d3b286d50a24">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="Crosstab Data Text" hAlign="Center"/>
	<queryString>
		<![CDATA[select l.name location_name, p.gender person_gender, date_format(p.date_created, '%Y-%m') created_month, count(*) total
from person p,
	person_attribute pa,
	person_attribute_type pat,
	location l
where p.person_id = pa.person_id
	and pa.person_attribute_type_id = pat.person_attribute_type_id
	and pat.name = 'Health Center'
	and pa.value = l.location_id
group by l.name, p.gender, date_format(p.date_created, 'Y-m')
order by location_name asc]]>
	</queryString>
	<field name="location_name" class="java.lang.String"/>
	<field name="person_gender" class="java.lang.String"/>
	<field name="created_month" class="java.lang.String"/>
	<field name="total" class="java.lang.Long"/>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="83" splitType="Stretch">
			<frame>
				<reportElement uuid="218e2a56-4ba6-4374-aa33-f3b0071eaeb5" mode="Opaque" x="0" y="0" width="555" height="83" backcolor="#006699"/>
				<staticText>
					<reportElement uuid="d8d78f09-0a91-4fd3-a9c3-ab241fd8544b" x="99" y="0" width="456" height="83" forecolor="#FFFFFF"/>
					<textElement textAlignment="Center" verticalAlignment="Middle">
						<font size="24" isBold="true"/>
					</textElement>
					<text><![CDATA[GEOGRAPHIC DISTRUBUTION OF REGISTRATION]]></text>
				</staticText>
				<image>
					<reportElement uuid="30af6975-981d-45b9-b823-3d26d3a27103" x="0" y="0" width="99" height="83"/>
					<imageExpression><![CDATA["repo:/Resources/jss_logo"]]></imageExpression>
				</image>
			</frame>
		</band>
	</title>
	<summary>
		<band height="146">
			<crosstab>
				<reportElement uuid="8f131331-f09d-45aa-b2bb-15e9c4efb2ca" x="0" y="12" width="572" height="131"/>
				<rowGroup name="location_name" width="70" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{location_name}]]></bucketExpression>
					</bucket>
					<crosstabRowHeader>
						<cellContents backcolor="#F0F8FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textField>
								<reportElement uuid="ced99f12-863d-40e4-847f-a31278617875" style="Crosstab Data Text" x="0" y="0" width="70" height="25"/>
								<textElement verticalAlignment="Middle">
									<font size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{location_name}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabRowHeader>
					<crosstabTotalRowHeader>
						<cellContents backcolor="#BFE1FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<staticText>
								<reportElement uuid="83b31530-0546-4ff7-b8fd-dbcf2d66839e" x="0" y="0" width="70" height="25"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="12"/>
								</textElement>
								<text><![CDATA[Total location_name]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalRowHeader>
				</rowGroup>
				<columnGroup name="created_month" height="30" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{created_month}]]></bucketExpression>
					</bucket>
					<crosstabColumnHeader>
						<cellContents backcolor="#F0F8FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textField>
								<reportElement uuid="c0224dec-572d-462a-89ce-f53980ae379e" style="Crosstab Data Text" x="0" y="0" width="209" height="30"/>
								<textElement verticalAlignment="Middle">
									<font size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{created_month}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabColumnHeader>
					<crosstabTotalColumnHeader>
						<cellContents backcolor="#005FB3" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<staticText>
								<reportElement uuid="1849ed80-9375-4f5d-a3bd-e8fed1e77bdc" x="0" y="0" width="50" height="60" forecolor="#FFFFFF"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="12"/>
								</textElement>
								<text><![CDATA[Total]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalColumnHeader>
				</columnGroup>
				<columnGroup name="person_gender" height="30" totalPosition="End">
					<bucket class="java.lang.String">
						<bucketExpression><![CDATA[$F{person_gender}]]></bucketExpression>
					</bucket>
					<crosstabColumnHeader>
						<cellContents backcolor="#F0F8FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<textField>
								<reportElement uuid="ef5eb41a-bc14-4ca0-9683-9e81fac19322" style="Crosstab Data Text" x="0" y="0" width="99" height="30"/>
								<textElement verticalAlignment="Middle">
									<font size="12"/>
								</textElement>
								<textFieldExpression><![CDATA[$V{person_gender}]]></textFieldExpression>
							</textField>
						</cellContents>
					</crosstabColumnHeader>
					<crosstabTotalColumnHeader>
						<cellContents backcolor="#BFE1FF" mode="Opaque">
							<box>
								<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
							</box>
							<staticText>
								<reportElement uuid="3ab7a1f7-8921-48d0-a939-2b3c345a883d" x="0" y="0" width="110" height="30"/>
								<textElement textAlignment="Center" verticalAlignment="Middle">
									<font size="12"/>
								</textElement>
								<text><![CDATA[Total person per month]]></text>
							</staticText>
						</cellContents>
					</crosstabTotalColumnHeader>
				</columnGroup>
				<measure name="totalMeasure" class="java.lang.Integer" calculation="Count">
					<measureExpression><![CDATA[$F{total}]]></measureExpression>
				</measure>
				<crosstabCell width="99" height="25">
					<cellContents>
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField>
							<reportElement uuid="c2b4c3c1-0a9b-4b6f-98f8-a673520e7550" style="Crosstab Data Text" x="0" y="0" width="99" height="25"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{totalMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="99" height="25" rowTotalGroup="location_name">
					<cellContents backcolor="#BFE1FF" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField>
							<reportElement uuid="35aa6a40-9f4c-4cd7-8700-e732d2df4703" style="Crosstab Data Text" x="0" y="0" width="99" height="25"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{totalMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="50" columnTotalGroup="created_month">
					<cellContents backcolor="#005FB3" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField>
							<reportElement uuid="ac650930-07ea-4a7d-93b9-e8fa47bb17eb" style="Crosstab Data Text" x="0" y="0" width="50" height="25" forecolor="#FFFFFF"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{totalMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="50" rowTotalGroup="location_name" columnTotalGroup="created_month">
					<cellContents backcolor="#005FB3" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField>
							<reportElement uuid="c12b09b7-0233-4a76-9e01-8c27aec19c8f" style="Crosstab Data Text" x="0" y="0" width="50" height="25" forecolor="#FFFFFF"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{totalMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="110" columnTotalGroup="person_gender">
					<cellContents backcolor="#BFE1FF" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField>
							<reportElement uuid="3be3fb3b-996a-424b-b54e-0198e9d0c3c3" style="Crosstab Data Text" x="0" y="0" width="110" height="25"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{totalMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
				<crosstabCell width="110" rowTotalGroup="location_name" columnTotalGroup="person_gender">
					<cellContents backcolor="#BFE1FF" mode="Opaque">
						<box>
							<pen lineWidth="0.5" lineStyle="Solid" lineColor="#000000"/>
						</box>
						<textField>
							<reportElement uuid="b997da26-e596-4fbc-a0a5-2afcecbc8e78" style="Crosstab Data Text" x="0" y="0" width="110" height="25"/>
							<textElement verticalAlignment="Middle">
								<font size="12"/>
							</textElement>
							<textFieldExpression><![CDATA[$V{totalMeasure}]]></textFieldExpression>
						</textField>
					</cellContents>
				</crosstabCell>
			</crosstab>
		</band>
	</summary>
</jasperReport>
