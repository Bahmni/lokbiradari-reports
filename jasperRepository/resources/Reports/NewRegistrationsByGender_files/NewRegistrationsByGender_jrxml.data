<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="NewRegistrationsByGender" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="3556bae0-c99e-4ffa-8caf-43b4168c1dd1">
	<property name="ireport.zoom" value="1.0"/>
	<property name="ireport.x" value="0"/>
	<property name="ireport.y" value="0"/>
	<style name="table">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2">
		<box>
			<pen lineWidth="1.0" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TH" mode="Opaque" backcolor="#F0F8FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_CH" mode="Opaque" backcolor="#BFE1FF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<style name="table 2_TD" mode="Opaque" backcolor="#FFFFFF">
		<box>
			<pen lineWidth="0.5" lineColor="#000000"/>
		</box>
	</style>
	<subDataset name="new_registrations_by_gender" uuid="9dc06b1d-0688-46fa-be42-268353872925">
		<parameter name="startDate" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/01/2010"]]></defaultValueExpression>
		</parameter>
		<parameter name="endDate" class="java.lang.String">
			<defaultValueExpression><![CDATA["01/11/2013"]]></defaultValueExpression>
		</parameter>
		<queryString>
			<![CDATA[SELECT
     Date_format(date_created, '%Y') year_created ,
     Date_format(date_created, '%m') month_created ,
     IF((Year(date_created)-Year(p.birthdate))<12,'C',p.gender)g ,
     Count(*) count

FROM
     person p
WHERE
     p.gender IS NOT NULL
 AND p.gender <> ''  AND    p.date_created > STR_TO_DATE($P{startDate},'%d/%m/%Y') AND p.date_created < STR_TO_DATE($P{endDate},'%d/%m/%Y')
GROUP BY
     year_created,
     month_created,
     g
ORDER BY
     year_created ASC,
     month_created ASC,
     g ASC]]>
		</queryString>
		<field name="year_created" class="java.lang.String"/>
		<field name="month_created" class="java.lang.String"/>
		<field name="g" class="java.lang.String"/>
		<field name="count" class="java.lang.Long"/>
		<group name="g">
			<groupExpression><![CDATA[$F{g}]]></groupExpression>
		</group>
	</subDataset>
	<queryString language="SQL">
		<![CDATA[SELECT
     date_created ,
     IF((Year(date_created)-Year(p.birthdate))<12,'C',p.gender)g ,
     Count(*)count
FROM
     person p
WHERE
     p.gender IS NOT NULL
 AND p.gender <> ''
GROUP BY
     p.date_created,
     g
ORDER BY
     p.date_created ASC,
     g ASC]]>
	</queryString>
	<field name="date_created" class="java.sql.Timestamp"/>
	<field name="g" class="java.lang.String"/>
	<field name="count" class="java.lang.Long"/>
	<group name="g">
		<groupExpression><![CDATA[$F{g}]]></groupExpression>
	</group>
	<background>
		<band splitType="Stretch"/>
	</background>
	<title>
		<band height="79" splitType="Stretch"/>
	</title>
	<pageHeader>
		<band height="35" splitType="Stretch"/>
	</pageHeader>
	<columnHeader>
		<band height="61" splitType="Stretch"/>
	</columnHeader>
	<detail>
		<band height="125" splitType="Stretch">
			<componentElement>
				<reportElement uuid="446e5cba-edb1-48d7-aeaa-fcff0ee94ebb" key="table 2" style="table 2" x="210" y="68" width="360" height="50"/>
				<jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
					<datasetRun subDataset="new_registrations_by_gender" uuid="76cedcb2-6a2f-4852-b823-30144290c7cd">
						<connectionExpression><![CDATA[$P{REPORT_CONNECTION}]]></connectionExpression>
					</datasetRun>
					<jr:column uuid="c53f3727-6820-45ee-883b-191a44c57b28" width="90">
						<jr:columnHeader style="table 2_CH" height="30">
							<staticText>
								<reportElement uuid="21024eb0-e2e2-4dbc-956f-08508670e4c8" x="0" y="0" width="90" height="30"/>
								<textElement/>
								<text><![CDATA[year_created]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 2_TD" height="20">
							<textField>
								<reportElement uuid="44573125-9dfb-4eea-abc9-a5c2129c5f6d" x="0" y="0" width="90" height="20"/>
								<textElement/>
								<textFieldExpression><![CDATA[$F{year_created}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column uuid="71892b26-509a-4634-91b6-a00e624cc410" width="90">
						<jr:columnHeader style="table 2_CH" height="30">
							<staticText>
								<reportElement uuid="a538adff-2e05-42f8-b739-934e848892c2" x="0" y="0" width="90" height="30"/>
								<textElement/>
								<text><![CDATA[month_created]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 2_TD" height="20">
							<textField>
								<reportElement uuid="caf05b62-78d7-49a5-b834-0a86e6f3b2e9" x="0" y="0" width="90" height="20"/>
								<textElement/>
								<textFieldExpression><![CDATA[$F{month_created}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column uuid="5dc6ed71-bf93-42c6-ac02-c3cd829aa732" width="90">
						<jr:columnHeader style="table 2_CH" height="30">
							<staticText>
								<reportElement uuid="edf2de75-9c6f-47c3-9477-2342af2bccee" x="0" y="0" width="90" height="30"/>
								<textElement/>
								<text><![CDATA[gender]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 2_TD" height="20">
							<textField>
								<reportElement uuid="b5668a8f-b8f4-449a-b9e6-e4275b5e225e" x="0" y="0" width="90" height="20"/>
								<textElement/>
								<textFieldExpression><![CDATA[$F{g}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
					<jr:column uuid="8e62b407-c3fd-48ac-8813-212333050e5e" width="90">
						<jr:columnHeader style="table 2_CH" height="30">
							<staticText>
								<reportElement uuid="6c5b4f06-3113-45a5-95b3-ac59ee459bd5" x="0" y="0" width="90" height="30"/>
								<textElement/>
								<text><![CDATA[count]]></text>
							</staticText>
						</jr:columnHeader>
						<jr:detailCell style="table 2_TD" height="20">
							<textField>
								<reportElement uuid="50526347-d240-4c5c-8e04-829bb6212069" x="0" y="0" width="90" height="20"/>
								<textElement/>
								<textFieldExpression><![CDATA[$F{count}]]></textFieldExpression>
							</textField>
						</jr:detailCell>
					</jr:column>
				</jr:table>
			</componentElement>
		</band>
	</detail>
	<columnFooter>
		<band height="45" splitType="Stretch"/>
	</columnFooter>
	<pageFooter>
		<band height="54" splitType="Stretch"/>
	</pageFooter>
	<summary>
		<band height="42" splitType="Stretch"/>
	</summary>
</jasperReport>
